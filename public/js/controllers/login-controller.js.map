{"version":3,"sources":["login-controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login-controller.js","sourcesContent":["'use strict';\n\nangular.module('CmasR')\n.controller('LoginController',[\n    '$scope','$http','$rootScope','$location',function($scope,$http,$rootScope,$location)\n    {\n        /*if($rootScope.loggedIn==\"true\")\n        {\n            console.log(\"User already logged in\");\n            $location.path('/dashboard');\n        }*/\n\n        console.log(\"logged in is \",$rootScope.loggedIn);\n        console.log(\"first time is \",$rootScope.firsttime);\n        if($rootScope.firsttime==\"true\")\n        {\n            $location.path('/dashboard');\n        }else if($rootScope.loggedIn==\"true\")\n        {\n            $location.path('/dashboard');\n        }\n\n        $scope.login = function()\n        {\n            if($scope.loginForm.$valid)\n            {\n                var username = $scope.user.email;\n                var password = $scope.user.password;\n\n                $http({\n                   headers:\n                   {\n                       'Content-Type':'application/json'\n                   },\n                    url: baseUrl+'auth',\n                    method: \"POST\",\n                    data:{\n                       email: username,\n                        password: password\n                    }\n\n                }).success(function(response)\n                {\n                    //console.log(response);\n                    $rootScope.userCredentials = response;\n                    $rootScope.loggedIn = \"true\";\n                    $rootScope.level = $rootScope.userCredentials.level;\n                    $rootScope.picture = $rootScope.userCredentials.picture_id;\n                    //console.log($rootScope.userCredentials);\n\n                    $http({headers:\n                    {\n                        'Content-Type':'application/json'\n                    },\n                        url: baseUrl+'session/set',\n                        method: \"POST\",\n                        data:{\n                            sessionStatus: \"true\",\n                            sessionEmail: $rootScope.userCredentials.email,\n                            sessionLevel: $rootScope.userCredentials.level,\n                            sessionPicture: $rootScope.userCredentials.picture_id,\n                            sessionName: $rootScope.userCredentials.name\n                        }})\n                        .success(function(sessionResponse)\n                        {\n                            /*console.log(\"session response\",sessionResponse);\n                            $rootScope.picture = sessionResponse.sessionPicture;\n                            $rootScope.name = sessionResponse.sessionName;\n                            $rootScope.level =sessionResponse.sessionLevel;\n                           // $rootScope.loggedIn = sessionResponse.sessionStatus;*/\n                            $rootScope.loggedIn = \"true\";\n                            $rootScope.firsttime = \"true\";\n                            console.log(\"Name is \",$rootScope.name);\n                            $location.path('/dashboard');\n\n                            //$location.path('/alerts');\n                        })\n                        .error(function(sessionData,sessionStatus,sessionHeaders)\n                        {\n                            console.log(sessionData,sessionStatus,sessionHeaders);\n                        });\n\n                   // $location.path('/dashboard');\n                }).error(function(data,status,headers)\n                {\n                    console.log(data,status,headers);\n                });\n            }\n        }\n    }\n]);"],"sourceRoot":"/source/"}