{"version":3,"sources":["site-monitor-controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sitesmonitor.js","sourcesContent":["'use strict';\n\nangular.module('CmasR')\n    .controller('MainSiteController',['$scope',\n        '$http','$rootScope','$timeout','$interval'\n        ,function($scope,$http,$rootScope,$timeout,$interval){\n\n            $(document).ready(function() {\n                $('[data-toggle=\"tooltip\"]').tooltip({\n                    container: 'body'\n                });\n            });\n\n            $scope.checkStatus = function()\n            {\n                $http({headers:\n                {\n                    'Content-Type':'application/json'\n                },\n                    url: baseUrl+'websites/get',\n                    method: \"POST\",\n                    data:{\n                        sessionEmail: $rootScope.userCredentials.email\n                    }})\n                    .success(function(sessionResponse)\n                    {\n                        //console.log(\"data retrieved\",sessionResponse);\n                        $rootScope.sitesInfo = sessionResponse;\n                        var i = 0;\n                        for(var key in sessionResponse)\n                        {\n                           if(!sessionResponse.hasOwnProperty(key))continue;\n                            var obj = sessionResponse[key];\n\n                            //console.log(obj['url']);\n                            $rootScope.urls[(i+2).toString()] = obj['url'];\n                            //$rootScope.siteNames[i.toString()] = obj['site_title'];\n                            //$rootScope.websites[i] = obj['url'];\n\n                            i++;\n                        }\n\n                        //console.log($rootScope.websites);\n\n                        $http({\n                            url: baseUrl+'websites/get/status',\n                            method: \"POST\",\n                            data:{\n                                sessionUrls: $rootScope.urls\n                            }})\n                            .success(function(statusResponse)\n                            {\n                                //console.log(\"status reponses\",statusResponse);\n                                $rootScope.status = statusResponse;\n                                //console.log($rootScope.status);\n\n                                for(var i=0; i<$rootScope.status.length; i++)\n                                {\n                                    $rootScope.responses[(i+2).toString()] = $rootScope.status[i];\n                                }\n\n                                //console.log(\"Responses\",$rootScope.responses);\n                            })\n                            .error(function(statusResponse)\n                            {\n                                console.log(statusResponse);\n                            });\n                    })\n                    .error(function(sessionData,sessionStatus,sessionHeaders)\n                    {\n                        console.log(sessionData);\n                        //$location.path('/');\n                    });\n            };\n\n            $scope.getError = function(index)\n            {\n                return $rootScope.regexEscape[index.toString()];\n            };\n            $scope.colorCode = function(index)\n            {\n                /*//console.log($rootScope.responses.valueOf(7));\n                 for(var key in $rootScope.responses)\n                 {\n                 console.log(key);\n                 }*/\n                //console.log(\"Urls \",$rootScope.urls);\n                //console.log(\"index is \"+index+\" \\n\");\n                //var value = $rootScope.status[index];\n                var value = $rootScope.responses[index];\n                //console.log(\"value of . is \"+value);\n                //var value2 = $rootScope.responses[index];\n                //console.log(\"value2 is \"+value2);\n                if(value!=null)\n                {\n                    switch(value.toString())\n                    {\n                        case \"0\":\n                            return \"Disaster\";\n                        case \"200\":\n                            return \"Success\";\n                        case \"204\":\n                            return \"No Content\";\n                        case \"205\":\n                            return \"Reset Content\";\n                        case \"301\":\n                            return \"Moved Permanently\";\n                        case \"302\":\n                            return \"Found\";\n                        case \"307\":\n                            return \"Temporary Redirect\";\n                        case \"400\":\n                            return \"Bad request\";\n                        case \"401\":\n                            return \"Unauthorized\";\n                        case \"403\":\n                            return \"Forbidden\";\n                        case \"404\":\n                            return \"Not Found\";\n                        case \"408\":\n                            return \"Request Timeout\";\n                        default:\n                            return \"Loading...\";\n                    }\n                }else{\n                    return \"Loading...\";\n                }\n\n                //var terminals = JSON.parse($rootScope.responses);\n                //console.log(terminals);\n\n                /*var i=0;\n                 for(; i<14; i++)\n                 {\n                 console.log($rootScope.responses);\n                 }*/\n\n\n            };\n\n\n            $timeout(function (){\n                $scope.checkStatus();\n            },100);\n\n            $interval(function (){\n                $scope.checkStatus();\n            },30000);//300 seconds\n\n            $scope.getColor = function(index)\n            {\n                var value = $rootScope.responses[index];\n                //console.log(\"The value is \"+value);\n\n                if(value!=null)\n                {\n                    switch(value.toString())\n                    {\n                        case \"0\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"200\":\n                            return {\"background-color\":\"#4EF84E\", \"color\":\"red\"};\n                        case \"204\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"205\":\n                            return {\"background-color\":\"yellow\", \"color\": \"black\"};\n                        case \"301\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"302\":\n                            return {\"background-color\":\"yellow\", \"color\": \"black\"};\n                        case \"307\":\n                            return {\"background-color\":\"yellow\", \"color\": \"black\"};\n                        case \"400\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"401\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"403\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"404\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                        case \"408\":\n                            return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n\n                        default:\n                            return {\"background-color\":\"gray\", \"color\":\"black\"};\n                    }\n                }else{\n                    return {\"background-color\":\"gray\", \"color\":\"black\"};\n                }\n\n\n            }\n\n        }])\n.controller('AddWebsiteCtrl',['$scope','$http','$rootScope',function($scope,$http,$rootScope)\n{\n    console.log(\"Add Website Controller Active\");\n    //var newWebsiteName = $scope.newSite;\n    $scope.placeholder_url = 'www.rancardsolutions.com';\n    $scope.placeholder_title = \"Rancard Mobility Site\";\n\n    $scope.addSite = function()\n    {\n        console.log(\"Site to be added\"+$scope.site.name);\n        $scope.url = \"scripts/PHP/websites.php\";\n\n        var temp1 = $scope.site.url; var temp2 = $scope.site.title;\n        var dataSent = {\"url\":temp1,\"sitetitle\": temp2};\n\n        //console.log(\"Data to be sent over : \"+dataSent);\n\n        $http.post($scope.url,dataSent)\n            .success(function (data, status, headers, config) {\n                //console.log(\"Data retrieved is \"+data);\n                console.log(\"After adding site\"+data);\n\n                $scope.status = status;\n                $scope.result = data;\n                console.log($scope.result);\n\n            })\n            .error(function (data, status, headers, config) {\n                console.log('error');\n            })\n    }\n}]);"],"sourceRoot":"/source/"}