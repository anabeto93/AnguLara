{"version":3,"sources":["site-monitor-controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sitesmonitor.js","sourcesContent":["'use strict';\n\nangular.module('CmasR')\n    .controller('MainSiteController',['$scope',\n        '$http','$rootScope','$timeout','$interval'\n        ,function($scope,$http,$rootScope,$timeout,$interval){\n\n            $scope.checkStatus = function()\n            {\n                /*//console.log($rootScope.urls);\n                console.log(\"Now checking the statuses\");\n                $scope.url = 'scripts/PHP/siteMonitor.php';\n                //console.log($scope.url);\n                //dataSent = {'urlsite': website};\n\n                //console.log($rootScope.urls);\n                $http.post($scope.url,$rootScope.urls)\n                    .success(function(data, status,headers,config) {\n                        console.log(\"Data retrieved is \"+data);\n                        //console.log($rootScope.urls['1']);\n                        $scope.status = status;\n                        $scope.data = data;\n                        //console.log(data.substring(13,data.length-3));\n\n                        //split them by commas\n                        var commaSplit = data.substring(13,data.length-3).split(',');\n                        //console.log(commaSplit);\n                        var i = 0;\n                        for (; i<commaSplit.length; i++)\n                        {\n                            var val = commaSplit[i].substring(commaSplit[i].indexOf(':')+1,commaSplit[i].length);\n                            //console.log(val);\n                            $rootScope.responses[(i+1).toString()] = val.toString();\n                        }\n                        //$rootScope.responses = JSON.parse(data.substring(12,data.length-2));\n                        console.log($rootScope.responses);\n                        //$scope.result = \"waiting...\";//data;\n                    })\n                    .error(function(data,status,headers,config){\n                        console.log('error');\n                    });*/\n                $http({headers:\n                {\n                    'Content-Type':'application/json'\n                },\n                    url: baseUrl+'websites/get',\n                    method: \"POST\",\n                    data:{\n                        sessionEmail: $rootScope.userCredentials.email\n                    }})\n                    .success(function(sessionResponse)\n                    {\n                        console.log(sessionResponse);\n                        //$location.path('/');\n                    })\n                    .error(function(sessionData,sessionStatus,sessionHeaders)\n                    {\n                        console.log(sessionData,sessionStatus,sessionHeaders);\n                        //$location.path('/');\n                    });\n            };\n\n            $scope.getError = function(index)\n            {\n                return $rootScope.regexEscape[index.toString()];\n            };\n            $scope.colorCode = function(index)\n            {\n                /*//console.log($rootScope.responses.valueOf(7));\n                 for(var key in $rootScope.responses)\n                 {\n                 console.log(key);\n                 }*/\n                //console.log(\"index is \"+index+\" \\n\");\n                var value = $rootScope.responses[index.toString()];\n                //console.log(\"value is \"+value);\n                var value2 = $rootScope.responses[index];\n                //console.log(\"value2 is \"+value2);\n\n                switch(value)\n                {\n                    case \"0\":\n                        return \"Disaster\";\n                    case \"200\":\n                        return \"Success\";\n                    case \"204\":\n                        return \"No Content\";\n                    case \"205\":\n                        return \"Reset Content\";\n                    case \"301\":\n                        return \"Moved Permanently\";\n                    case \"302\":\n                        return \"Found\";\n                    case \"307\":\n                        return \"Temporary Redirect\";\n                    case \"400\":\n                        return \"Bad request\";\n                    case \"401\":\n                        return \"Unauthorized\";\n                    case \"403\":\n                        return \"Forbidden\";\n                    case \"404\":\n                        return \"Not Found\";\n                    case \"408\":\n                        return \"Request Timeout\";\n                    default:\n                        return \"Loading...\";\n                }\n                //var terminals = JSON.parse($rootScope.responses);\n                //console.log(terminals);\n\n                /*var i=0;\n                 for(; i<14; i++)\n                 {\n                 console.log($rootScope.responses);\n                 }*/\n\n\n            };\n\n\n            $timeout(function (){\n                $scope.checkStatus();\n            },500);\n\n            $interval(function (){\n                $scope.checkStatus();\n            },30000);\n\n            $scope.getColor = function(index)\n            {\n                var value = $rootScope.responses[index.toString()];\n                //console.log(\"The value is \"+value);\n\n                switch(value)\n                {\n                    case \"0\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"200\":\n                        return {\"background-color\":\"#4EF84E\", \"color\":\"red\"};\n                    case \"204\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"205\":\n                        return {\"background-color\":\"yellow\", \"color\": \"black\"};\n                    case \"301\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"302\":\n                        return {\"background-color\":\"yellow\", \"color\": \"black\"};\n                    case \"307\":\n                        return {\"background-color\":\"yellow\", \"color\": \"black\"};\n                    case \"400\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"401\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"403\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"404\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n                    case \"408\":\n                        return {\"background-color\":\"#EE1C1C\",\"color\":\"white\"};\n\n                    default:\n                        return {\"background-color\":\"gray\", \"color\":\"black\"};\n                }\n\n            }\n\n        }]);"],"sourceRoot":"/source/"}